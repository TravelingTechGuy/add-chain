{"version":3,"sources":["bridges.svg","Bridges.js","App.js","index.js"],"names":["Bridges","useState","undefined","edge1","setEdge1","edge2","setEdge2","bridge","setBridge","error","setError","edgesList","edges","bridges","forEach","b","push","Set","sort","className","onClick","onChange","e","target","value","map","Error","find","err","message","name","rel","href","url","comment","src","drawing","alt","App","chains","setChains","selectedChain","setSelectedChain","currentNetwork","setCurrentNetwork","showChainData","setShowChainData","addChain","a","chainId","chainName","rpcUrls","rpc","nativeCurrency","infoURL","method","includes","window","ethereum","request","params","toString","blockExplorerUrls","console","useEffect","fetch","response","json","localeCompare","getChains","length","autoRefreshOnNetworkChange","on","location","reload","networkId","current","findIndex","parseInt","getWallet","repo","side","colorBackground","colorOctocat","i","shortName","JSON","stringify","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.877e81ee.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/bridges.8abd48af.svg\";","import React, {useState} from 'react';\r\nimport bridges from './bridges.json';\r\nimport drawing from './bridges.svg';\r\n\r\nconst Bridges = () => {\r\n  const [edge1, setEdge1] = useState(undefined);\r\n  const [edge2, setEdge2] = useState(undefined);\r\n  const [bridge, setBridge] = useState(undefined);\r\n  const [error, setError] = useState(undefined);\r\n  \r\n  const edgesList = ((() => {\r\n    let edges = [];\r\n    bridges.forEach(b => {\r\n      edges.push(b.edge1);\r\n      edges.push(b.edge2);\r\n    });\r\n    return [...new Set(edges)].sort();\r\n  })());\r\n\r\n  const findBridge = () => {\r\n    try {\r\n      setError(undefined);\r\n      if(!edge1) throw new Error('Plaese select \"from\" chain');\r\n      if(!edge2) throw new Error('Plaese select \"to\" chain');\r\n      if(edge1 === edge2) throw new Error('Plaese select 2 different chains');\r\n      const bridge = bridges.find(b => (b.edge1 === edge1 && b.edge2 === edge2) || (b.edge1 === edge2 && b.edge2 === edge1));\r\n      setBridge(bridge);\r\n      if(!bridge) {\r\n        throw new Error(`Couldn't find bridge between ${edge1} and ${edge2} - try a different route`);\r\n      }\r\n    }\r\n    catch(err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Find a bridge between chains</h2>\r\n      {error &&\r\n          <div>\r\n            <div className=\"segment error\">{error}</div>\r\n            <button\r\n              className=\"button errorButton\"\r\n              onClick={() => setError(undefined)}>\r\n                Clear error and try again\r\n            </button>\r\n          </div>\r\n        }\r\n      From:&nbsp;\r\n      <select onChange={e => setEdge1(e.target.value)}>\r\n        <option value=\"\">Select \"From\" chain</option>\r\n        {edgesList.map(e => <option value={e} key={e}>{e}</option>)}\r\n      </select>\r\n      &nbsp;&nbsp;To:&nbsp;\r\n      <select onChange={e => setEdge2(e.target.value)}>\r\n        <option value=\"\">Select \"To\" chain</option>\r\n        {edgesList.map(e => <option value={e} key={e}>{e}</option>)}\r\n      </select>\r\n      &nbsp;&nbsp;\r\n      <button \r\n        className=\"button chainButton\"\r\n        onClick={findBridge}>\r\n          Find bridge\r\n      </button>\r\n      {bridge &&\r\n        <div className=\"chainData\">\r\n          Use the <b>{bridge.name}</b> at <a target=\"_blank\" rel=\"noreferrer\" href={bridge.url}>{bridge.url}</a>\r\n          {bridge.comment && <><br/><b>Comment:</b> {bridge.comment}</>}\r\n        </div>\r\n      }\r\n      <div className=\"drawing\">\r\n        <img src={drawing} alt=\"bridges visualization\" />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Bridges;\r\n","import React, {useEffect, useState} from 'react';\r\nimport ForkMeOnGithub from 'fork-me-on-github';\r\nimport Bridges from './Bridges';\r\nimport './App.css';\r\n\r\nconst chainsUrl = 'https://chainid.network/chains.json';\r\n\r\nconst App = () => {\r\n  const [chains, setChains] = useState([]);\r\n  const [selectedChain, setSelectedChain] = useState(undefined);\r\n  const [error, setError] = useState(undefined);\r\n  const [currentNetwork, setCurrentNetwork] = useState(undefined);\r\n  const [showChainData, setShowChainData] = useState(false);\r\n\r\n  const addChain = async () => {\r\n    const {chainId, name: chainName, rpc: rpcUrls, nativeCurrency, infoURL} = chains[selectedChain];\r\n    const method = [1, 3, 4, 42, 420].includes(chainId) ? 'wallet_updateEthereumChain' : 'wallet_addEthereumChain';\r\n    //const method = 'wallet_addEthereumChain';\r\n    try {\r\n      await window.ethereum.request({\r\n        method,\r\n        params: [{\r\n          chainId: `0x${chainId.toString(16)}`,\r\n          chainName,\r\n          nativeCurrency,\r\n          rpcUrls,\r\n          blockExplorerUrls: [infoURL]\r\n        }]\r\n      });\r\n    }\r\n    catch(err) {\r\n      console.error(err);\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getChains = async () => {\r\n      try {\r\n        const response = await fetch(chainsUrl);\r\n        const chains = await response.json();\r\n        chains.sort((a, b) => a.name.localeCompare(b.name));\r\n        setChains(chains);\r\n      }\r\n      catch(err) {\r\n        console.error(err);\r\n        setError(err.message);\r\n      }\r\n    };\r\n    getChains();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getWallet = async () => {\r\n      if(!chains.length) {\r\n        return;\r\n      }\r\n      try {\r\n        const {ethereum} = window;\r\n        if(!ethereum) {\r\n          throw new Error('Please install a Web3 wallet (like Metamask)');\r\n        }\r\n        ethereum.autoRefreshOnNetworkChange = false;\r\n        ethereum\r\n          .on('accountsChanged', () => {window.location.reload();})\r\n          .on('chainChanged', () => {window.location.reload();});\r\n        const networkId = await ethereum.request({method: 'net_version'});\r\n        const current = chains.findIndex(({chainId}) => chainId === parseInt(networkId, 10));\r\n        setCurrentNetwork(current);\r\n      }\r\n      catch(err) {\r\n        console.error(err);\r\n        setError(err.message);\r\n      }\r\n    };\r\n    getWallet();\r\n  }, [chains]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <ForkMeOnGithub\r\n        repo=\"https://github.com/TravelingTechGuy/add-chain\"\r\n        side=\"right\"\r\n        colorBackground=\"#7b38d8\"\r\n        colorOctocat=\"white\"\r\n      />\r\n      <header>\r\n        <img src=\"https://travelingtechguy.github.io/add-chain/favicon/favicon-32x32.png\" alt=\"icon\" className=\"logo\" />\r\n        <h1>MetaMask Chains</h1>\r\n      </header>\r\n      <main>\r\n        <h2>Add a new chain to your MetaMask</h2>\r\n        {error &&\r\n          <div>\r\n            <div className=\"segment error\">{error}</div>\r\n            <button\r\n              className=\"button errorButton\"\r\n              onClick={() => setError(undefined)}>\r\n                Clear error and try again\r\n            </button>\r\n          </div>\r\n        }\r\n        <div className=\"segment network\">\r\n          Current network: {currentNetwork !== undefined ? chains[currentNetwork].name : 'Development'}\r\n        </div>\r\n        <div>\r\n          {\r\n            chains.length &&\r\n            <select onChange={e => setSelectedChain(e.target.value)}>\r\n              {\r\n                chains.map(({name, shortName}, i) => <option value={i} key={shortName}>{name}</option>)\r\n              }\r\n            </select>\r\n          }\r\n          {selectedChain &&\r\n            <>\r\n              <button\r\n                className=\"button addButton\"\r\n                onClick={addChain}>\r\n                  Add selected chain\r\n              </button>\r\n              <button \r\n                className=\"button chainButton\"\r\n                onClick={() => setShowChainData(!showChainData)}>\r\n                  {showChainData ? 'Hide': 'Show'} Chain data\r\n              </button>\r\n              {showChainData &&\r\n                <div className=\"chainData\">\r\n                  <code>\r\n                    <pre>{JSON.stringify(chains[selectedChain], null, 2)}</pre>\r\n                  </code>\r\n                </div>\r\n              }\r\n            </>\r\n          }\r\n        </div>\r\n        <hr/>\r\n        <Bridges />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}