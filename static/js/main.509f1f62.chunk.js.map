{"version":3,"sources":["bridges.svg","Bridges.js","App.js","index.js"],"names":["ChainsDropdown","direction","onChange","edgesList","edges","bridges","forEach","b","push","edge1","edge2","Set","sort","value","map","e","Bridges","useState","undefined","setEdge1","setEdge2","paths","setPaths","error","setError","className","onClick","target","Error","filter","length","err","message","p","name","rel","href","url","comment","src","drawing","alt","App","chains","setChains","selectedChain","setSelectedChain","currentNetwork","setCurrentNetwork","showChainData","setShowChainData","addChain","a","chainId","chainName","rpcUrls","rpc","nativeCurrency","infoURL","method","includes","window","ethereum","request","params","toString","blockExplorerUrls","console","useEffect","fetch","response","json","localeCompare","getChains","autoRefreshOnNetworkChange","on","location","reload","networkId","current","findIndex","parseInt","getWallet","repo","side","colorBackground","colorOctocat","i","shortName","JSON","stringify","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.509f1f62.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/bridges.8abd48af.svg\";","import React, {useState} from 'react';\r\nimport bridges from './bridges.json';\r\nimport drawing from './bridges.svg';\r\n\r\nconst ChainsDropdown = ({direction = '', onChange}) => {\r\n  const edgesList = ((() => {\r\n    let edges = [];\r\n    bridges.forEach(b => {\r\n      edges.push(b.edge1);\r\n      edges.push(b.edge2);\r\n    });\r\n    return [...new Set(edges)].sort();\r\n  })());\r\n\r\n  return (\r\n    <select onChange={onChange}>\r\n      <option value=\"\">Select \"{direction}\" chain</option>\r\n      {edgesList.map(e => <option value={e} key={e}>{e}</option>)}\r\n    </select>\r\n  );\r\n};\r\n\r\nconst Bridges = () => {\r\n  const [edge1, setEdge1] = useState(undefined);\r\n  const [edge2, setEdge2] = useState(undefined);\r\n  const [paths, setPaths] = useState([]);\r\n  const [error, setError] = useState(undefined);\r\n  \r\n  const findBridge = () => {\r\n    try {\r\n      setError(undefined);\r\n      if(!edge1) throw new Error('Plaese select \"from\" chain');\r\n      if(!edge2) throw new Error('Plaese select \"to\" chain');\r\n      if(edge1 === edge2) throw new Error('Plaese select 2 different chains');\r\n      const paths = bridges.filter(b => (b.edge1 === edge1 && b.edge2 === edge2) || (b.edge1 === edge2 && b.edge2 === edge1));\r\n      setPaths(paths);\r\n      if(!paths.length) {\r\n        throw new Error(`Couldn't find bridge between ${edge1} and ${edge2} - try a different route`);\r\n      }\r\n    }\r\n    catch(err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Find a bridge between chains</h2>\r\n      {error &&\r\n        <div>\r\n          <div className=\"segment error\">{error}</div>\r\n          <button\r\n            className=\"button errorButton\"\r\n            onClick={() => setError(undefined)}>\r\n              Clear error and try again\r\n          </button>\r\n        </div>\r\n      }\r\n      From:&nbsp;\r\n      <ChainsDropdown\r\n        direction=\"From\"\r\n        onChange={e => setEdge1(e.target.value)} \r\n      />\r\n      &nbsp;&nbsp;To:&nbsp;\r\n      <ChainsDropdown\r\n        direction=\"To\"\r\n        onChange={e => setEdge2(e.target.value)} \r\n      />\r\n      &nbsp;&nbsp;\r\n      <button \r\n        className=\"button chainButton\"\r\n        onClick={findBridge}>\r\n          Find bridge\r\n      </button>\r\n      {\r\n        paths.length ? \r\n          paths.map(p => \r\n            <div className=\"chainData\">\r\n              Use <b>{p.name}</b> at <a target=\"_blank\" rel=\"noreferrer\" href={p.url}>{p.url}</a>\r\n              {p.comment && <><br/><b>Comment:</b> {p.comment}</>}\r\n            </div>\r\n          )\r\n        :\r\n          null\r\n      }\r\n      <div className=\"drawing\">\r\n        <img src={drawing} alt=\"bridges visualization\" />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Bridges;\r\n","import React, {useEffect, useState} from 'react';\r\nimport ForkMeOnGithub from 'fork-me-on-github';\r\nimport Bridges from './Bridges';\r\nimport './App.css';\r\n\r\nconst chainsUrl = 'https://chainid.network/chains.json';\r\n\r\nconst App = () => {\r\n  const [chains, setChains] = useState([]);\r\n  const [selectedChain, setSelectedChain] = useState(undefined);\r\n  const [error, setError] = useState(undefined);\r\n  const [currentNetwork, setCurrentNetwork] = useState(undefined);\r\n  const [showChainData, setShowChainData] = useState(false);\r\n\r\n  const addChain = async () => {\r\n    const {chainId, name: chainName, rpc: rpcUrls, nativeCurrency, infoURL} = chains[selectedChain];\r\n    const method = [1, 3, 4, 42, 420].includes(chainId) ? 'wallet_updateEthereumChain' : 'wallet_addEthereumChain';\r\n    //const method = 'wallet_addEthereumChain';\r\n    try {\r\n      await window.ethereum.request({\r\n        method,\r\n        params: [{\r\n          chainId: `0x${chainId.toString(16)}`,\r\n          chainName,\r\n          nativeCurrency,\r\n          rpcUrls,\r\n          blockExplorerUrls: [infoURL]\r\n        }]\r\n      });\r\n    }\r\n    catch(err) {\r\n      console.error(err);\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getChains = async () => {\r\n      try {\r\n        const response = await fetch(chainsUrl);\r\n        const chains = await response.json();\r\n        chains.sort((a, b) => a.name.localeCompare(b.name));\r\n        setChains(chains);\r\n      }\r\n      catch(err) {\r\n        console.error(err);\r\n        setError(err.message);\r\n      }\r\n    };\r\n    getChains();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getWallet = async () => {\r\n      if(!chains.length) {\r\n        return;\r\n      }\r\n      try {\r\n        const {ethereum} = window;\r\n        if(!ethereum) {\r\n          throw new Error('Please install a Web3 wallet (like Metamask)');\r\n        }\r\n        ethereum.autoRefreshOnNetworkChange = false;\r\n        ethereum\r\n          .on('accountsChanged', () => {window.location.reload();})\r\n          .on('chainChanged', () => {window.location.reload();});\r\n        const networkId = await ethereum.request({method: 'net_version'});\r\n        const current = chains.findIndex(({chainId}) => chainId === parseInt(networkId, 10));\r\n        setCurrentNetwork(current);\r\n      }\r\n      catch(err) {\r\n        console.error(err);\r\n        setError(err.message);\r\n      }\r\n    };\r\n    getWallet();\r\n  }, [chains]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <ForkMeOnGithub\r\n        repo=\"https://github.com/TravelingTechGuy/add-chain\"\r\n        side=\"right\"\r\n        colorBackground=\"#7b38d8\"\r\n        colorOctocat=\"white\"\r\n      />\r\n      <header>\r\n        <img src=\"https://travelingtechguy.github.io/add-chain/favicon/favicon-32x32.png\" alt=\"icon\" className=\"logo\" />\r\n        <h1>MetaMask Chains</h1>\r\n      </header>\r\n      <main>\r\n        <h2>Add a new chain to your MetaMask</h2>\r\n        {error &&\r\n          <div>\r\n            <div className=\"segment error\">{error}</div>\r\n            <button\r\n              className=\"button errorButton\"\r\n              onClick={() => setError(undefined)}>\r\n                Clear error and try again\r\n            </button>\r\n          </div>\r\n        }\r\n        <div className=\"segment network\">\r\n          Current network: {currentNetwork !== undefined ? chains[currentNetwork].name : 'Development'}\r\n        </div>\r\n        <div>\r\n          {\r\n            chains.length &&\r\n            <select onChange={e => setSelectedChain(e.target.value)}>\r\n              {\r\n                chains.map(({name, shortName}, i) => <option value={i} key={shortName}>{name}</option>)\r\n              }\r\n            </select>\r\n          }\r\n          {selectedChain &&\r\n            <>\r\n              <button\r\n                className=\"button addButton\"\r\n                onClick={addChain}>\r\n                  Add selected chain\r\n              </button>\r\n              <button \r\n                className=\"button chainButton\"\r\n                onClick={() => setShowChainData(!showChainData)}>\r\n                  {showChainData ? 'Hide': 'Show'} Chain data\r\n              </button>\r\n              {showChainData &&\r\n                <div className=\"chainData\">\r\n                  <code>\r\n                    <pre>{JSON.stringify(chains[selectedChain], null, 2)}</pre>\r\n                  </code>\r\n                </div>\r\n              }\r\n            </>\r\n          }\r\n        </div>\r\n        <hr/>\r\n        <Bridges />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}